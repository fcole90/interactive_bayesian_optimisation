<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
      // set the pyodide files URL (packages.json, pyodide.asm.data etc)
      // window.languagePluginUrl = 'https://pyodide-cdn2.iodide.io/v0.15.0/full/';
    </script>
<!--    <script src="https://pyodide-cdn2.iodide.io/v0.15.0/full/pyodide.js"></script>-->
<!--    <script src="static/js/webworker.js"></script>-->
</head>
<body>
<h3>Work in progress...</h3>
Pyodide test page <br>
Open your browser console to see pyodide output
<script type="text/javascript">
  // languagePluginLoader.then(function () {
  //   console.log(pyodide.runPython('import sys\nsys.version'));
  //   console.log(pyodide.runPython('print(1 + 2)'));
  // });


  // Webworker code
  var pyodideWorker = new Worker('./static/libs/webworker.js');

  pyodideWorker.onerror = (e) => {
    console.log(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`);
  }

  pyodideWorker.onmessage = (e) => {
    const {results, error} = e.data
    if (results) {
      console.log('pyodideWorker return results: ', results)
    } else if (error) {
      console.log('pyodideWorker error: ', error)
    }
  }

  const data = {
    A_rank: [0.8, 0.4, 1.2, 3.7, 2.6, 5.8],
    python:
      'import statistics\n' +
      'from js import A_rank\n' +
      'statistics.stdev(A_rank)'
  }

  pyodideWorker.postMessage(data)
</script>
</body>